# 7. `AccountEquity()`函数

- `AccountEquity()`: 返回值表示当前账户的净值,类型为double

```mq4
//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
  {
//---
   double myAccountEquity = AccountEquity();
   Print(myAccountEquity);
  }
```

净值(Equity): `净值(Equity) = 账户余额(Balance) + 已有持仓的浮动盈亏(Floating P/L)`

- 账户余额(Balance): 不考虑未平仓单的情况下,你账户里的资金总额
- 浮动盈亏(Floating P/L): 当前所有未平仓单,按市场价格计算出的浮动盈利或亏损
- 净值(Equity): 上面2部分之和,表示此刻账户的**真实资金价值**

例:

- 账户初始入金: 10,000美元
- 当前未平仓订单浮亏: -500美元
- 当前未平仓订单浮盈: +300美元

则:

- Balance = 10,000
- Floating P/L = -500 + 300 = -200
- Equity = 10,000 - 200 = 9,800

用途:

- 风控: 净值比单纯看余额更准确,因为它实时反映了账户资金在市场波动下的实际价值
- 保证金检查: **交易平台一般会根据净值来判断保证金水平,从而决定是否触发强平**
  - 这个可能在后续实现功能时需要用到
- 策略编程: 在EA或指标中,可以用`AccountEquity()`判断资金状况,控制开仓/加仓/止损逻辑
