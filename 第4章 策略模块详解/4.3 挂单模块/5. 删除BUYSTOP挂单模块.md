# 5. 删除`BUYSTOP`挂单模块

有挂单模块自然也有删除挂单模块.当满足一定的条件时,需要将没有成交的挂单删除,就需要用到删除挂单模块.

- 删除`BUYSTOP`挂单模块: 用于将没有成交的`BUYSTOP`挂单删除

```mq4
// currencyPair 货币对
string currencyPair;

// MAGIC 魔术号,和EA是1对1关系.本质是一个用户自定义的订单标识.用于在同一个账户中,标识不同EA下的订单
int MAGIC = 105;

// alertFlag 标识是否开启警告的标记位
bool alertFlag = false;

void closeBUYSTOP() {
   // 订单号
   int ticket = 0;
  
   // 订单类型
   int orderType;
   
   // 用于遍历订单的索引
   int orderIndex;
   
   // 用于标识关闭挂单是否成功的标量
   bool closeResult = false;
   
   for (orderIndex = OrdersTotal() - 1; orderIndex >= 0; orderIndex--) {
      bool selectResult = OrderSelect(orderIndex, SELECT_BY_POS);
      if (!selectResult) {
         continue;
      }
      
      if (OrderSymbol() != currencyPair) {
         continue;
      }
      
      if (OrderMagicNumber() != MAGIC) {
         continue;
      }
      
      orderType = OrderType();
      
      if (orderType != OP_BUYSTOP) {
         continue;
      }
      
      ticket = OrderTicket();
      closeResult = OrderDelete(ticket);
      
      if(!alertFlag) {
         continue;
      }
      
      if(closeResult) {
         Alert("成功删除BUYSTOP挂单,订单号为: ", ticket);
         continue;
      }
      
      Alert("删除BUYSTOP挂单失败: ",GetLastError());
   }
}
```

- `OrderDelete(ticket, color)`: 删除指定订单的挂单.若删除成功则返回`true`;若删除失败则返回`false`
  - `ticket`: 订单号
  - `color`: 可选参数,用于指定删除订单时的颜色.默认值为`CLR_NONE`
