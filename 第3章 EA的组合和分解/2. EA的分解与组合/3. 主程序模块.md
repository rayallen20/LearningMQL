# 3. 主程序模块

存储该EA的策略核心,只要货币对价格变动一次,且满足策略的条件,程序就会被执行一次,一直循环执行.

```mq4
//+------------------------------------------------------------------+
//| Expert tick function                                             |
//+------------------------------------------------------------------+
void OnTick()
  {
//---
   // 指定交易的货币对为 EA加载时的货币对
   currencyPair = Symbol();
   
   // 判断是否符合下买单条件
   bool canPlaceBuyOrder = canPlaceBuyOrder();
   if(canPlaceBuyOrder) {
      // 指定下单量的大小
      orderVolume = 0.02;
      
      // 指定止损点数
      stopLossPoint = 200;
      
      // 指定止盈点数
      stopProfitPoint = 200;
      
      // 完成下买单动作
      placeBuyOrder();
   }
   
   // 判断是否符合下卖单条件
   bool canPlaceSellOrder = canPlaceSellOrder();
   if (canPlaceSellOrder) {
      // 指定下单量的大小
      orderVolume = 0.04;
      
      // 完成下卖单动作
      placeSellOrder();
   }
   
   // 若账户盈利大于3美元 则将买单和卖单平仓
   if (AccountProfit() > 3) {
      closeBuyOrder();
      closeSellOrder();
   }
  }
```
